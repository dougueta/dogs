(this.webpackJsonpdogs=this.webpackJsonpdogs||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports={header:"Header_header__2fIN1",nav:"Header_nav__2n7rG",logo:"Header_logo__21Rn4",login:"Header_login__HlIPV"}},function(e,t,n){e.exports={wrapper:"Input_wrapper__38g5z",input:"Input_input__CvjeR",label:"Input_label__34ctT",error:"Input_error__2wiFA"}},function(e,t,n){e.exports={form:"_3WCtwAMNRJ4H33f_HJBqjt",perdeu:"_3XKkUTNvS_y2U2SrJXljcQ",cadastro:"IODlTnETazVjJBKpsFTHN",subtitle:"_3l-K1cEM1aVxTSJO1OrcA8"}},function(e,t,n){e.exports={button:"Button_button__bvESP"}},,,function(e,t,n){e.exports={login:"Login_login__L32O8",forms:"Login_forms__2iBAI"}},,function(e,t,n){},,,,,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(16),c=n.n(s),o=(n(23),n(7)),l=n(2),i=n(9),u=n.n(i);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 10h1.652c1.708 0 2.63 2.004 1.518 3.302l-1.618 1.887A4.501 4.501 0 0024.5 14.5a1.5 1.5 0 013 0A7.5 7.5 0 0114 19 7.5 7.5 0 01.5 14.5a1.5 1.5 0 013 0 4.5 4.5 0 008.948.689l-1.618-1.887C9.718 12.004 10.64 10 12.35 10H14z",fill:"#333"}),p=r.createElement("circle",{cx:21,cy:3,r:3,fill:"#333"}),h=r.createElement("circle",{cx:7,cy:3,r:3,fill:"#333"});function f(e,t){var n=e.title,a=e.titleId,s=b(e,["title","titleId"]);return r.createElement("svg",j({width:28,height:22,viewBox:"0 0 28 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,d,p,h)}var O=r.forwardRef(f),x=(n.p,n(4)),m=n.n(x),v=n(5),g=n(3),w="https://dogsapi.origamid.dev/json";function y(e){return{url:w+"/jwt-auth/v1/token",options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}}}function _(e){return{url:w+"/jwt-auth/v1/token/validate",options:{method:"POST",headers:{Authorization:"Bearer "+e}}}}function k(e){return{url:w+"/api/user",options:{method:"GET",headers:{Authorization:"Bearer "+e}}}}function S(e){return{url:w+"/api/user",options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}}}var N=n(1),C=a.a.createContext(),E=function(e){var t=e.children,n=Object(r.useState)(null),s=Object(g.a)(n,2),c=s[0],o=s[1],i=Object(r.useState)(null),u=Object(g.a)(i,2),j=u[0],b=u[1],d=Object(r.useState)(!1),p=Object(g.a)(d,2),h=p[0],f=p[1],O=Object(r.useState)(null),x=Object(g.a)(O,2),w=x[0],S=x[1],E=Object(l.h)(),I=a.a.useCallback(Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(null),S(null),f(!1),b(!1),window.localStorage.removeItem("token"),E("/login");case 6:case"end":return e.stop()}}),e)}))),[E]);function L(e){return A.apply(this,arguments)}function A(){return(A=Object(v.a)(m.a.mark((function e(t){var n,r,a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k(t),r=n.url,a=n.options,e.next=3,fetch(r,a);case 3:return s=e.sent,e.next=6,s.json();case 6:c=e.sent,o(c),b(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(v.a)(m.a.mark((function e(t,n){var r,a,s,c,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(null),f(!0),r=y({username:t,password:n}),a=r.url,s=r.options,e.next=6,fetch(a,s);case 6:if(c=e.sent,console.log("tokenRes",c),c.ok){e.next=10;break}throw new Error("Error: Usu\xe1rio e/ou senha inv\xe1lidos");case 10:return e.next=12,c.json();case 12:return o=e.sent,l=o.token,window.localStorage.setItem("token",l),e.next=17,L(l);case 17:E("/conta"),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("erro",e.t0),S(e.t0.message),f(!1);case 25:return e.prev=25,f(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,20,25,28]])})))).apply(this,arguments)}return a.a.useEffect((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var t,n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.localStorage.getItem("token"))){e.next=21;break}return e.prev=2,S(null),f(!0),n=_(t),r=n.url,a=n.options,e.next=8,fetch(r,a);case 8:if(e.sent.ok){e.next=11;break}throw new Error("Token invalido");case 11:return e.next=13,L(t);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),I();case 18:return e.prev=18,f(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[E,I]),Object(N.jsx)(C.Provider,{value:{userLogin:function(e,t){return P.apply(this,arguments)},userLogout:I,data:c,error:w,loading:h,login:j},children:t})},I=function(){var e=a.a.useContext(C),t=e.data,n=e.userLogout;return console.log(t),Object(N.jsx)("header",{className:u.a.header,children:Object(N.jsxs)("nav",{className:"".concat(u.a.nav," container"),children:[Object(N.jsx)(o.b,{className:u.a.logo,to:"/","aria-label":"Dogs - Home",children:Object(N.jsx)(O,{})}),t?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(o.b,{className:u.a.login,to:"/conta",children:t.nome}),Object(N.jsx)("button",{onClick:n,children:"Sair"})]}):Object(N.jsx)(o.b,{className:u.a.login,to:"/login",children:"Login / Criar"})]})})},L=n(17),A=n.n(L),P=function(){return Object(N.jsx)("div",{className:A.a.Footer,children:"Footer"})},T=function(){return Object(N.jsx)("div",{children:"Home"})},B=n(8),H=n(10),z=n.n(H),J=function(e){var t=e.label,n=e.type,r=e.name,a=e.value,s=e.onChange,c=e.error,o=e.onBlur;return Object(N.jsxs)("div",{className:z.a.wrapper,children:[Object(N.jsxs)("label",{htmlFor:r,className:z.a.label,children:[" ",t]}),Object(N.jsx)("input",{id:r,name:r,className:z.a.input,type:n,onChange:s,value:a,onBlur:o}),c&&Object(N.jsx)("p",{className:z.a.error,children:c})]})},R=n(18),F=n(12),U=n.n(F);var D=function(e){var t=e.children,n=e.disabled,r=Object(R.a)(e,["children","disabled"]);return Object(N.jsx)("button",Object(B.a)(Object(B.a)({disabled:n},r),{},{className:U.a.button,children:t}))},M={email:{regex:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Preencha um email v\xe1lido"},password:{regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/,message:"A senha precisa ter 1 car\xe1cter mai\xfasculo, 1 min\xfasculo e 1 digito"}},V=function(e){var t=a.a.useState(""),n=Object(g.a)(t,2),r=n[0],s=n[1],c=a.a.useState(null),o=Object(g.a)(c,2),l=o[0],i=o[1];function u(t){return!1===e||(0===t.length?(i("Preencha um valor."),!1):M[e]&&!M[e].regex.test(t)?(i(M[e].message),!1):(i(null),!0))}return{value:r,setValue:s,onChange:function(e){var t=e.target;l&&u(t.value),s(t.value)},error:l,validate:function(){return u(r)},onBlur:function(){return u(r)}}},Z=function(e){var t=e.error;return t?Object(N.jsx)("p",{style:{color:"#f31",margin:"1rem 0"},children:t}):null},q=n(11),K=n.n(q),G=function(){var e=V(),t=V(),n=a.a.useContext(C),r=n.userLogin,s=n.error,c=n.loading;function l(){return(l=Object(v.a)(m.a.mark((function n(a){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a.preventDefault(),e.validate()&&t.validate()&&r(e.value,t.value);case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(N.jsxs)("section",{className:"animeLeft",children:[Object(N.jsx)("h1",{className:"title",children:"Login"}),Object(N.jsxs)("form",{className:K.a.form,onSubmit:function(e){return l.apply(this,arguments)},children:[Object(N.jsx)(J,Object(B.a)({label:"Usu\xe1rio",type:"text",name:"username"},e)),Object(N.jsx)(J,Object(B.a)({label:"Senha",type:"password",name:"password"},t)),c?Object(N.jsx)(D,{disabled:!0,children:"Carregando..."}):Object(N.jsx)(D,{children:"Entrar"}),Object(N.jsx)(Z,{error:s})]}),Object(N.jsx)(o.b,{className:K.a.perdeu,to:"/login/perdeu",children:"Perdeu a Senha?"}),Object(N.jsxs)("div",{className:K.a.cadastro,children:[Object(N.jsx)("h2",{className:K.a.subtitle,children:"Cadastre-se"}),Object(N.jsx)("p",{children:"Ainda n\xe3o possui conta? Cadastre-se no site."}),Object(N.jsx)(o.b,{className:U.a.button,to:"/login/criar",children:"Cadastro"})]})]})},X=function(){var e=a.a.useState(null),t=Object(g.a)(e,2),n=t[0],r=t[1],s=a.a.useState(null),c=Object(g.a)(s,2),o=c[0],l=c[1],i=a.a.useState(!1),u=Object(g.a)(i,2),j=u[0],b=u[1];return{data:n,loading:j,error:o,request:a.a.useCallback(function(){var e=Object(v.a)(m.a.mark((function e(t,n){var a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(null),b(!0),e.next=5,fetch(t,n);case 5:return a=e.sent,e.next=8,a.json();case 8:if(s=e.sent,!1!==a.ok){e.next=11;break}throw new Error(s.message);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),s=null,l(e.t0.message);case 17:return e.prev=17,r(s),b(!1),e.abrupt("return",{response:a,json:s});case 22:case"end":return e.stop()}}),e,null,[[0,13,17,22]])})));return function(t,n){return e.apply(this,arguments)}}(),[])}},$=function(){var e=V(),t=V("email"),n=V(),r=a.a.useContext(C).userLogin,s=X(),c=s.loading,o=s.error,l=s.request;function i(){return(i=Object(v.a)(m.a.mark((function a(s){var c,o,i,u;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),c=S({username:e.value,email:t.value,password:n.value}),o=c.url,i=c.options,a.next=4,l(o,i);case 4:u=a.sent,console.log("response",u),u.ok&&r(e.value,n.value);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(N.jsxs)("section",{className:"animeLeft",children:[Object(N.jsx)("h1",{className:"title",children:"Cadastre-se"}),Object(N.jsxs)("form",{onSubmit:function(e){return i.apply(this,arguments)},children:[Object(N.jsx)(J,Object(B.a)({label:"Usu\xe1rio",type:"text",name:"username"},e)),Object(N.jsx)(J,Object(B.a)({label:"Email",type:"email",name:"email"},t)),Object(N.jsx)(J,Object(B.a)({label:"Senha",type:"password",name:"password"},n)),c?Object(N.jsx)(D,{disabled:!0,children:"Cadastrando..."}):Object(N.jsx)(D,{children:"Cadastrar"}),Object(N.jsx)(Z,{error:o})]})]})};var Q=function(){return Object(N.jsx)("div",{children:"LoginPasswordLost"})};var W=function(){return Object(N.jsx)("div",{children:"LoginPasswordReset"})},Y=n(15),ee=n.n(Y),te=function(){return!0===a.a.useContext(C).login?Object(N.jsx)(l.a,{to:"/conta"}):Object(N.jsx)("section",{className:ee.a.login,children:Object(N.jsx)("div",{className:ee.a.forms,children:Object(N.jsxs)(l.d,{children:[Object(N.jsx)(l.b,{path:"/",element:Object(N.jsx)(G,{})}),Object(N.jsx)(l.b,{path:"criar",element:Object(N.jsx)($,{})}),Object(N.jsx)(l.b,{path:"perdeu",element:Object(N.jsx)(Q,{})}),Object(N.jsx)(l.b,{path:"perdeu",element:Object(N.jsx)(W,{})})]})})})};var ne=function(){return Object(N.jsx)(o.a,{children:Object(N.jsxs)(E,{children:[Object(N.jsx)(I,{}),Object(N.jsxs)(l.d,{children:[Object(N.jsx)(l.b,{path:"/",element:Object(N.jsx)(T,{})}),Object(N.jsx)(l.b,{path:"/login/*",element:Object(N.jsx)(te,{})})]}),Object(N.jsx)(P,{})]})})};c.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(ne,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.823ad942.chunk.js.map